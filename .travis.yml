language: python
sudo: false

git:
  submodules: false

matrix:
  include:
    - os: windows
      language: cpp
      filter_secrets: false

before_install:
  - export "PATH=$PATH;C:\msys64\mingw64\bin"
  - choco install -y python
  - choco install -y dejavufonts
  - wget "http://repo.msys2.org/distrib/x86_64/msys2-base-x86_64-20180531.tar.xz"
  - 7z e msys2-base-x86_64-20180531.tar.xz
  - 7z x -y msys2-base-x86_64-20180531.tar
  - mv msys64 /c/
  - powershell -executionpolicy bypass "C:\msys64\usr\bin\bash -lc 'pacman -S mingw-w64-x86_64-gtk3 --noconfirm'"

install:
  - py -m pip install --upgrade pip setuptools

script:
  - py -m pip install .[test]
  - py -m pytest
