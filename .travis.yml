language: python
sudo: false

git:
  submodules: false

matrix:
  include:
    - os: windows
      language: cpp

before_install:
  - choco install python
  - choco install msys2

install:
  - powershell -executionpolicy bypass "C:\tools\msys64\usr\bin\bash -lc 'pacman -S mingw-w64-x86_64-gtk3 --noconfirm'"
  - py -m pip install --upgrade pip setuptools
  - ls /c/
  - ls /c/tools/
  - ls /c/tools/msys64
  - ls /c/tools/msys2
  - ls /c/msys2

script:
  - export "PATH=$PATH:C:\tools\msys2\mingw64\bin"
  - py -m pip install .[test]
  - py -m pytest
